= ü™¥ JSON Specification

WARNING: This specification is prone to change during the development of this project.

The idea behind this specification is to have a fairly generic `json` that can be used
throughout the project without needing too much effort to adapt to it.

The main idea is to always include the metadata of the communication so when debugging and
writing expectations, we can easily know the source and the timestamp. Those metadata MUST be 
used to identify and assert that the communication is valid and manageable by the receiver.

The structure is intentionally simple: metadata for identification, action for semantic meaning,
and value for the actual data payload.

With that we can develop our systems, by considering them as black boxes, with one
input and one output. Inputs will **ONLY** accept the specified `json` as entry type.
Any system **MUST** output its data using this `json` spec.

== Basic JSON

This is an example of the basic JSON structure.

[,json]
----
{
  "metadata": {
     "timestamp": 1678886400,
     "senderId": "ESP32-010101"
  },
  "action": "semantic-action",
  "value": null
}
----

== üìã Structure

=== Metadata

The `metadata` object contains essential information about the message:

- `timestamp` - Unix timestamp (integer) indicating when the message was created
- `senderId` - String identifier of the device/system that sent the message

=== Action

The `action` field is a string that semantically describes the intent or purpose of the message.

=== Value

The `value` field contains the actual data payload. It can be any valid JSON value (null, string, number, boolean, object, or array).

== üóÉÔ∏è Enums

This `json` uses a few Enums key as values.

- `action` **Action**
- `value` **Value** (can be of various types: string, number, boolean, object, array, or null)

=== üìÑ Action

The `action` field is a semantic action identifier that describes the intent of the message.
It is a string value that should be meaningful and descriptive of what the message is intended to do.

==== Examples

- `semantic-action` - A generic semantic action
- `ping` - Check if a device is accessible
- `update` - Send an update of a value
- `sensor-read` - Request or send sensor data
- `command` - Execute a command

The action field allows receivers to understand the purpose of the message without needing to parse the value field.

=== üìÑ Value

The `value` field can contain any valid JSON value:

- `null` - No value
- `string` - A string value
- `number` - An integer or floating point number
- `boolean` - A boolean value (`true` or `false`)
- `object` - A JSON object
- `array` - A JSON array

The type and structure of the value should be determined by the `action` field and the context of the communication.

== üé≠ Sender / Reveiver naming convention

To have a simple naming convention for devices that is readable and visible,
we must use :

----
<DEVICE TYPE>-<HEX Color code>
----

The HEX Color code can be use in GUIs and serve as an 8bit id. Witch is small af but sufficient and can really be pretty and usefull.
The device type is a human readable devices type.

=== Device type list :


[cols="1,1", options="header"]
|===

| Name | Description

| `ESP32`
| Any esp32 no matter what type of esp32.

| `RVR`
| The rover. s/ ^^'

| `SPHERO`
| A sphero

| `IPHONE`
| An iphone

| `SERVER`
| A server (macbook, or anything that is not a "portable" devices)

| `ARD`
| An arduino

| `STM32`
| I dunno why we would need this but an stm32.

|===
